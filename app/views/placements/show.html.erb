
<div class="row">
  <div class="col">
    <table class="table">
      <tr>
        <td class="w-25"><label>Descrição:</label></td>
        <td><%= @placement.description %></td>
      </tr>

      <tr>
        <td class="w-25"><label>Contatos:</label></td>
        <td><%= @placement.contact %></td>
      </tr>
    </table>
  </div>

  <div class="col">
    <table class="table">
      <tr> <td>
        <div class="d-flex justify-content-around">
          <%= link_to 'Editar', edit_placement_path(@placement), class: "btn btn-primary btn-block m-0 mx-1" %>
          <%= link_to fa_icon(:list, text: "Voltar"), :back, class: "btn btn-secondary btn-block m-0 mx-1" %>
        </div>
      </td> </tr>
    </table>
  </div>
</div>

<div class="row">
  <div class="col">
    <table class="table">
      <tr>
        <td class="w-25"><label>Endereço:</label></td>
        <td><%= @placement.address %></td>
      </tr>
    </table>
  </div>
</div>


<div class="row text-center mt-3">
  <div class="col">
    <h5 class="d-inline">Items com plaqueta</h5>
    <div class="d-inline float-right">
      <%= link_to_prev_page @items, fa_icon("chevron-left"), param_name: :items_page %>
      <%= link_to_next_page @items, fa_icon("chevron-right"), param_name: :items_page %>
    </div>
    <table class="table table-hover table-sm">
      <tr>
        <th class="col-4" scope="col">Plaqueta</th>
        <th class="col-4" scope="col">Descrição</th>
        <th class="col-4" scope="col">Número de série</th>
        <th class="col-auto"></th>
      </tr>
      <% @items.each do |item| %>
        <tr scope="row">
          <td> <%= item.plate %> </td>
          <td> <%= item %> </td>
          <td> <%= item.serial %> </td>
          <td> <%= link_to fa_icon("info-circle"), item, class: "text-info" %></td>
        </tr>
      <% end %>
      <tr> <td colspan="4"> <small> <%= page_entries_info @items %> </small> </td> </tr>
    </table>
  </div>

  <div class="col">
    <h5 class="d-inline">Items de estoque</h5>
    <div class="d-inline float-right">
      <%= link_to_prev_page @stock_item_counts, fa_icon("chevron-left"), param_name: :stock_items_page %>
      <%= link_to_next_page @stock_item_counts, fa_icon("chevron-right"), param_name: :stock_items_page %>
    </div>
    <table class="table table-hover table-sm">
      <tr>
        <th class="col-6" scope="col">Descrição</th>
        <th class="col-2" scope="col">Quantidade</th>
        <th class="col-4" scope="col">Baixa</th>
      </tr>
      <% @stock_item_counts.each do |item| %>
        <tr scope="row">
          <td class="col-6"> <%= item.stock_item.short_description %> </td>
          <td class="col-2"> <%= item.count %> </td>
          <td class="col-4">
            <%= form_for :stock_item_count, wrapper: :inline_form, url: discharge_stock_items_placement_path(@placement), method: :post, html: { class: 'form-inline' } do |f| %>
              <%= f.hidden_field_tag :stock_item_id, item.stock_item_id %>
              <%= f.text_field :count, style: "width: 5em", min: 1, class: "mx-1 form-control"%>
              <button type="submit" class="btn btn-danger btn-sm mx-1"> <%=fa_icon("minus-circle")%> </button>
            <% end %>
          </td>
        </tr>
      <% end %>
      <tr> <td colspan="3"> <small> <%= page_entries_info @stock_item_counts %> </small> </td> </tr>
    </table>
  </div>
</div>

<div class="row text-center mt-3">
  <div class="col">
    <h5 class="d-inline">Aquisições para este local</h5>
    <div class="d-inline float-right">
      <%= link_to_prev_page @acquisitions, fa_icon("chevron-left"), param_name: :ac_page %>
      <%= link_to_next_page @acquisitions, fa_icon("chevron-right"), param_name: :ac_page %>
    </div>
    <table class="table table-hover table-sm">
      <tr>
        <th class="col-4" scope="col">Data</th>
        <th class="col-4" scope="col">Responsável</th>
        <th class="col-4" scope="col">Fornecedor</th>
        <th class="col-auto" scope="col"></th>
      </tr>
      <% @acquisitions.each do |acquisition| %>
        <tr scope="row">
          <td> <%= localize acquisition.date %> </td>
          <td> <%= acquisition.operator %> </td>
          <td> <%= acquisition.supplier %> </td>
          <td> <%= link_to fa_icon("info-circle"), acquisition, class: "text-info" %> </td>
        </tr>
      <% end %>
      <tr> <td colspan="4"> <small> <%= page_entries_info @acquisitions %> </small> </td> </tr>
    </table>
  </div>

  <div class="col">
    <h5 class="d-inline">Alocações para este local</h5>
    <div class="d-inline float-right">
      <%= link_to_prev_page @allocations, fa_icon("chevron-left"), param_name: :al_page %>
      <%= link_to_next_page @allocations, fa_icon("chevron-right"), param_name: :al_page %>
    </div>
    <table class="table table-hover table-sm">
      <tr>
        <th class="col-6" scope="col">Data</th>
        <th class="col-6" scope="col">Resposável</th>
        <th class="col-auto" scope="col"></th>
      </tr>
      <% @allocations.each do |allocation| %>
        <tr scope="row">
          <td class="col-6"> <%= localize allocation.date %> </td>
          <td class="col-6"> <%= allocation.operator %> </td>
          <td class="col-auto"> <%= link_to fa_icon("info-circle"), allocation, class: "text-info" %> </td>
        </tr>
      <% end %>
      <tr> <td colspan="3"> <small> <%= page_entries_info @allocations %> </small> </td> </tr>
    </table>
  </div>
</div>